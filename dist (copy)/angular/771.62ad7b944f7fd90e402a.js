(self.webpackChunkangular=self.webpackChunkangular||[]).push([[771],{1771:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ArticleViewModule:()=>y});var o=n(1116),i=n(1462),r=n(3179),s=n(4735),c=n(5043),m=n(7368),a=n(9425),l=n(1671);let p=(()=>{class t{constructor(){}ngOnChanges(t){this.writer&&(this.writerasync=new Promise((t,e)=>{t(this.writer)}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-writer-info"]],inputs:{writer:"writer"},features:[m.TTD],decls:14,vars:9,consts:[["id","container"],["id","left"],["id","avatar"],[3,"src"],["id","bio"]],template:function(t,e){if(1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"h2"),m._uU(2,"About Writer"),m.qZA(),m.TgZ(3,"div",1),m.TgZ(4,"div",2),m._UZ(5,"img",3),m.ALo(6,"async"),m.qZA(),m.TgZ(7,"div",4),m.TgZ(8,"h3"),m._uU(9),m.ALo(10,"async"),m.qZA(),m.TgZ(11,"p"),m._uU(12),m.ALo(13,"async"),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){let t,n,o;m.xp6(5),m.Q6J("src",null==(t=m.lcZ(6,3,e.writerasync))?null:t.AvatarURL,m.LSH),m.xp6(4),m.Oqu(null==(n=m.lcZ(10,5,e.writerasync))?null:n.Name),m.xp6(3),m.Oqu(null==(o=m.lcZ(13,7,e.writerasync))?null:o.Bio)}},pipes:[o.Ov],styles:["#container[_ngcontent-%COMP%]{margin-top:55px;padding:19px;background-color:wheat}mat-card[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}#avatar[_ngcontent-%COMP%], #left[_ngcontent-%COMP%]{display:flex;justify-content:left}#avatar[_ngcontent-%COMP%]{width:100px;height:100px}#avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;overflow-y:hidden}#bio[_ngcontent-%COMP%]{margin-left:25px}"]}),t})();var u=n(4369),g=n(3070),d=n(9550),h=n(2797);let f=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-comment"]],inputs:{comment:"comment"},decls:5,vars:2,template:function(t,e){1&t&&(m.TgZ(0,"mat-card"),m.TgZ(1,"mat-card-subtitle"),m._uU(2),m.qZA(),m.TgZ(3,"p"),m._uU(4),m.qZA(),m.qZA()),2&t&&(m.xp6(2),m.Oqu(e.comment.Name),m.xp6(2),m.Oqu(e.comment.Text))},directives:[h.a8,h.$j],styles:["mat-card[_ngcontent-%COMP%]{margin-top:10px}"]}),t})();function Z(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",8),m.TgZ(1,"button",9),m.NdJ("click",function(){return m.CHM(t),m.oxw().showComments()}),m._uU(2,"show comments..."),m.qZA(),m.qZA()}}function w(t,e){1&t&&m._UZ(0,"app-comment",16),2&t&&m.Q6J("comment",e.$implicit)}function C(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",10),m.TgZ(1,"h4"),m._uU(2,"comments"),m.qZA(),m.TgZ(3,"form",11),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw().goInsertComment()}),m.TgZ(4,"mat-form-field"),m._UZ(5,"input",12),m.qZA(),m.TgZ(6,"mat-form-field"),m._UZ(7,"textarea",13),m.qZA(),m.TgZ(8,"button",14),m._uU(9,"send"),m.qZA(),m.qZA(),m.YNc(10,w,1,1,"app-comment",15),m.ALo(11,"async"),m.qZA()}if(2&t){const t=m.oxw();m.xp6(3),m.Q6J("formGroup",t.commentForm),m.xp6(7),m.Q6J("ngForOf",m.lcZ(11,2,t.comments))}}let x=(()=>{class t{constructor(t,e){this.router=t,this.store=e,this.isCommentLoaded=!1}ngOnDestroy(){this.articleSubs&&this.articleSubs.unsubscribe(),this.store.dispatch(new r.wp),this.commentSubs&&this.commentSubs.unsubscribe(),this.store.dispatch(new s.cZ),this.From&&"Article"!=this.From?"Search"==this.From&&this.store.dispatch(new c.Lb):this.store.dispatch(new r.Lb)}ngOnInit(){this.ID=Number(this.router.snapshot.queryParamMap.get("ID")),this.From=this.router.snapshot.queryParamMap.get("From"),this.From&&"Article"!=this.From?"Search"==this.From&&this.initFromSearch():this.initFromArticle()}initFromArticle(){console.log("initFromArticle"),this.articleSubs=this.store.select("article").subscribe(t=>{let e=t.Article;e&&(this.article=new Promise((t,n)=>{t(e)}))}),this.store.dispatch(new r.c5(this.ID))}initFromSearch(){console.log("initFromSearch"),this.articleSubs=this.store.select("search").subscribe(t=>{let e=t.Article;e&&(this.article=new Promise((t,n)=>{t(e)}))}),this.store.dispatch(new c.c5(this.ID))}createCommentForm(){this.commentForm=new i.cw({Name:new i.NI(null,i.kI.required),Text:new i.NI(null,i.kI.required)})}showComments(){this.createCommentForm(),this.retrieveComment(),this.isCommentLoaded=!this.isCommentLoaded}retrieveComment(){this.commentSubs=this.store.select("comment").subscribe(t=>{t.Comments&&(this.comments=new Promise((e,n)=>{e(t.Comments)}))}),this.store.dispatch(new s.sk(this.ID))}goInsertComment(){this.store.dispatch(new s.W5({ID:this.ID,Name:this.commentForm.value.Name,Text:this.commentForm.value.Text})),this.afterInsertComment()}afterInsertComment(){this.commentForm.setValue({Text:null,Name:null}),this.commentForm.markAsPristine(),this.commentForm.markAsUntouched(),this.commentForm.controls.Name.setErrors(null),this.commentForm.controls.Text.setErrors(null)}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(a.gz),m.Y36(l.yh))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-article-view"]],decls:18,vars:17,consts:[["id","container"],["id","title"],["id","preview-image"],[3,"src"],["id","body"],[3,"writer"],["id","toggle",4,"ngIf"],["id","comment-sec",4,"ngIf"],["id","toggle"],["mat-flat-button","",3,"click"],["id","comment-sec"],[3,"formGroup","ngSubmit"],["matInput","","placeholder","Name","formControlName","Name"],["matInput","","placeholder","what do you think?..","formControlName","Text"],["mat-flat-button","","type","submit","color","primary"],[3,"comment",4,"ngFor","ngForOf"],[3,"comment"]],template:function(t,e){if(1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"h1"),m._uU(3),m.ALo(4,"async"),m.qZA(),m.TgZ(5,"p"),m._uU(6),m.ALo(7,"async"),m.qZA(),m.qZA(),m.TgZ(8,"div",2),m._UZ(9,"img",3),m.ALo(10,"async"),m.qZA(),m.TgZ(11,"div",4),m._uU(12),m.ALo(13,"async"),m.qZA(),m._UZ(14,"app-writer-info",5),m.ALo(15,"async"),m.YNc(16,Z,3,0,"div",6),m.YNc(17,C,12,4,"div",7),m.qZA()),2&t){let t,n,o,i,r;m.xp6(3),m.hij(" ",null==(t=m.lcZ(4,7,e.article))?null:t.Title," "),m.xp6(3),m.hij(" ",null==(n=m.lcZ(7,9,e.article))?null:n.Date," "),m.xp6(3),m.Q6J("src",null==(o=m.lcZ(10,11,e.article))?null:o.ImageURL,m.LSH),m.xp6(3),m.hij(" ",null==(i=m.lcZ(13,13,e.article))?null:i.Body," "),m.xp6(2),m.Q6J("writer",null==(r=m.lcZ(15,15,e.article))?null:r.WriterInfo),m.xp6(2),m.Q6J("ngIf",!e.isCommentLoaded),m.xp6(1),m.Q6J("ngIf",e.isCommentLoaded)}},directives:[p,o.O5,u.lW,i._Y,i.JL,i.sg,g.KE,d.Nt,i.Fj,i.JJ,i.u,o.sg,f],pipes:[o.Ov],styles:["#container[_ngcontent-%COMP%]{margin:0 200px}#title[_ngcontent-%COMP%]{margin-top:25px;padding:19px;background-color:wheat}#container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:25px;margin-top:0}#preview-image[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}#preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:19px;display:block;width:100%;overflow-y:hidden}#body[_ngcontent-%COMP%]{padding:19px;margin-top:35px}#body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}#comment-sec[_ngcontent-%COMP%]{border-top:1px solid #000;margin-top:100px}#comment-sec[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], #comment-sec[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block;margin-top:5px}#toggle[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}@media only screen and (max-width:900px){#container[_ngcontent-%COMP%]{margin-left:0;margin-right:0}}"]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[o.ez]]}),t})();var b=n(5425);let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[o.ez,b.m]]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[o.ez,a.Bz.forChild([{path:"",component:x}]),A,_,b.m]]}),t})()}}]);