(self.webpackChunkangular=self.webpackChunkangular||[]).push([[588],{2588:(t,e,i)=>{"use strict";i.r(e),i.d(e,{EditArticleModule:()=>T});var n=i(1116),o=i(1462),a=i(3179),r=i(6535),s=i(7906),l=i(7368),u=i(9425),g=i(1671),c=i(5244);function d(t,e){if(1&t&&(l.TgZ(0,"div",15),l._UZ(1,"img",16),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("src",t.ImageURL,l.LSH)}}function h(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",17),l.NdJ("click",function(){return l.CHM(t),l.oxw().goSaveAs()}),l._uU(1,"save as"),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("disabled",t.articleForm.invalid)}}function m(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"button",7),l.NdJ("click",function(){return l.CHM(t),l.oxw().goSave()}),l._uU(1,"save"),l.qZA()}}let p=(()=>{class t{constructor(t,e,i){this.route=t,this.store=e,this.router=i,this.Tag=[],this.TagString="",this.ImageURL="",this.saveas=!1}ngOnDestroy(){this.store.dispatch(new a.wp),this.authSubs&&this.authSubs.unsubscribe(),this.store.dispatch(new r.Lb),this.store.dispatch(new s.Lb)}ngOnInit(){this.authSubs=this.store.select("auth").subscribe(t=>{t.ID||this.router.navigateByUrl("/admin/login")}),this.admArticleSubs=this.store.select("admarticle").subscribe(t=>{let e=t.SavedID;e&&(this.SavedID=e)}),this.initForm();let t=Number(this.route.snapshot.queryParamMap.get("ID"));this.store.select("article").subscribe(t=>{let e=t.Article;e&&(this.ID=e.ID,this.setForm(e))}),this.store.dispatch(new a.c5(t))}setForm(t){this.articleForm.setValue({Title:t.Title,ImageURL:t.ImageURL,addTag:null,Body:t.Body}),this.Tag=[...t.Tag],this.TagString=this.Tag.toString()}initForm(){this.articleForm=new o.cw({Title:new o.NI(null,o.kI.required),ImageURL:new o.NI(null,o.kI.required),addTag:new o.NI(null),Body:new o.NI(null,o.kI.required)})}peek(){this.ImageURL=this.articleForm.value.ImageURL}addTag(){let t=this.articleForm.value.addTag;t&&(this.Tag.push(t),this.TagString=this.Tag.toString(),this.articleForm.patchValue({addTag:null}))}removeTag(){this.Tag.length>0&&(this.Tag.pop(),this.TagString=this.Tag.toString())}goSave(){this.store.dispatch(new r.w2({ID:this.SavedID,Date:null,Title:this.articleForm.value.Title,ImageURL:this.articleForm.value.ImageURL,Tag:this.Tag,Preview:null,Body:this.articleForm.value.Body,WriterInfo:null})),console.log("GO SAVE")}goSaveAs(){this.store.dispatch(new r.NX({ID:null,Date:null,Title:this.articleForm.value.Title,ImageURL:this.articleForm.value.ImageURL,Tag:this.Tag,Preview:null,Body:this.articleForm.value.Body,WriterInfo:null})),this.saveas=!0,console.log("GO SAVE AS")}goEdit(){this.store.dispatch(new r.xz({ID:this.ID,Date:null,Title:this.articleForm.value.Title,ImageURL:this.articleForm.value.ImageURL,Tag:this.Tag,Preview:null,Body:this.articleForm.value.Body,WriterInfo:null})),console.log("GO EDIT")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(u.gz),l.Y36(g.yh),l.Y36(u.F0))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-edit-article"]],decls:26,vars:5,consts:[["id","container"],[3,"formGroup","ngSubmit"],["id","title"],["id","input-group"],["placeholder","give a title...","formControlName","Title"],["placeholder","add an ImageURL...","formControlName","ImageURL"],["id","peek",4,"ngIf"],["type","button",3,"click"],["placeholder","add some tags...","formControlName","addTag"],["id","btn-group"],["type","button",3,"disabled","click",4,"ngIf"],["type","button",3,"click",4,"ngIf"],["type","submit"],["type","button"],["formControlName","Body"],["id","peek"],[3,"src"],["type","button",3,"disabled","click"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"form",1),l.NdJ("ngSubmit",function(){return e.goEdit()}),l.TgZ(2,"div",2),l.TgZ(3,"h1"),l._uU(4,"edit article"),l.qZA(),l.qZA(),l.TgZ(5,"div",3),l._UZ(6,"input",4),l._UZ(7,"input",5),l.YNc(8,d,2,1,"div",6),l.TgZ(9,"button",7),l.NdJ("click",function(){return e.peek()}),l._uU(10,"peek"),l.qZA(),l._UZ(11,"input",8),l.TgZ(12,"p"),l._uU(13),l.qZA(),l.TgZ(14,"button",7),l.NdJ("click",function(){return e.addTag()}),l._uU(15,"add"),l.qZA(),l.TgZ(16,"button",7),l.NdJ("click",function(){return e.removeTag()}),l._uU(17,"remove"),l.qZA(),l.qZA(),l.TgZ(18,"div",9),l.YNc(19,h,2,1,"button",10),l.YNc(20,m,2,0,"button",11),l.TgZ(21,"button",12),l._uU(22,"submit edit"),l.qZA(),l.TgZ(23,"button",13),l._uU(24,"preview"),l.qZA(),l.qZA(),l._UZ(25,"quill-editor",14),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("formGroup",e.articleForm),l.xp6(7),l.Q6J("ngIf",e.ImageURL),l.xp6(5),l.Oqu(e.TagString),l.xp6(6),l.Q6J("ngIf",!e.saveas),l.xp6(1),l.Q6J("ngIf",e.saveas))},directives:[o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,n.O5,c.g6],styles:["#container[_ngcontent-%COMP%]{margin:0 200px}#title[_ngcontent-%COMP%]{width:100%;background-color:wheat}#peek[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:128px}#input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;margin-top:5px;margin-bottom:5px}#btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}#btn-group[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:25px}"]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[n.ez,u.Bz.forChild([{path:"",component:p}]),o.UX,c.fi.forRoot({modules:{toolbar:{container:c.dn.toolbar,handlers:{image:function(){const t=this.quill.theme.tooltip,e=t.save,i=t.hide;t.save=function(){const t=this.quill.getSelection(!0),e=this.textbox.value;e&&this.quill.insertEmbed(t.index,"image",e,"user")},t.hide=function(){t.save=e,t.hide=i,t.hide()},t.edit("image"),t.textbox.placeholder="Embed URL"}}}}})]]}),t})()}}]);