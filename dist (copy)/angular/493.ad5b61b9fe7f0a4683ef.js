(self.webpackChunkangular=self.webpackChunkangular||[]).push([[493],{2493:(t,e,n)=>{"use strict";n.r(e),n.d(e,{SettingsModule:()=>h});var s=n(1116),i=n(1462),r=n(7906),a=n(7368),o=n(1671),l=n(9425);let u=(()=>{class t{constructor(t,e){this.store=t,this.router=e}ngOnDestroy(){this.authSubs&&this.authSubs.unsubscribe(),this.store.dispatch(new r.Lb)}ngOnInit(){this.initForm(),this.authSubs=this.store.select("auth").subscribe(t=>{let e=t.ID;e?(this.ID=e,this.Name=t.Name,this.AvatarURL=t.AvatarURL,this.Bio=t.Bio,this.setForm()):this.router.navigateByUrl("/admin/login")})}initForm(){this.settingsForm=new i.cw({Name:new i.NI(null),Bio:new i.NI(null),Avatar:new i.NI(null)})}setForm(){this.settingsForm.setValue({Name:this.Name,Bio:this.Bio,Avatar:null})}onFileChange(t){t.target.files&&t.target.files.length&&(this.fileHolder=t.target.files[0],this.settingsForm.controls.Avatar.setErrors(null))}goSubmitChanges(){let t=this.settingsForm.value.Name,e=this.settingsForm.value.Bio,n=this.ID,s=this.fileHolder;if(!s&&!e&&!t)return void alert("cannot post empty request");let i=new FormData;t&&t!=this.Name&&i.append("Name",t),e&&e!=this.Bio&&i.append("Bio",e),s&&i.append("Avatar",s,"AVATAROF"+n),this.store.dispatch(new r.NF(i)),this.afterSubmitChanges()}afterSubmitChanges(){this.settingsForm.setValue({Bio:null,Avatar:null,Name:null}),this.settingsForm.markAsTouched(),this.settingsForm.markAsPristine(),this.settingsForm.markAsUntouched(),this.settingsForm.controls.Avatar.setErrors(null),this.fileHolder=null}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(o.yh),a.Y36(l.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-settings"]],decls:9,vars:1,consts:[["id","container"],["id","wrapper"],[3,"formGroup","ngSubmit"],["type","file","formControlName","Avatar",3,"change"],["placeholder","Name","formControlName","Name"],["placeholder","Bio","formControlName","Bio"],["type","submit"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"form",2),a.NdJ("ngSubmit",function(){return e.goSubmitChanges()}),a.TgZ(3,"input",3),a.NdJ("change",function(t){return e.onFileChange(t)}),a.qZA(),a._UZ(4,"input",4),a._UZ(5,"textarea",5),a.TgZ(6,"button",6),a._uU(7,"submit"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._uU(8,">")),2&t&&(a.xp6(2),a.Q6J("formGroup",e.settingsForm))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:["#container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20vh}#wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], #wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block}#wrapper[_ngcontent-%COMP%]{padding:15px}@media only screen and (max-width:900px){#container[_ngcontent-%COMP%]{margin-top:0}}"]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[s.ez,l.Bz.forChild([{path:"",component:u}]),i.UX]]}),t})()}}]);