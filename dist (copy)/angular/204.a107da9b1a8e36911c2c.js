(self.webpackChunkangular=self.webpackChunkangular||[]).push([[204],{8204:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MediaModule:()=>y});var n=i(1116),a=i(5947),s=i(7906),r=i(7368),o=i(1671),d=i(9425),p=i(1934),c=i(1462),l=i(9624);let m=(()=>{class t{constructor(t,e){this.store=t,this.sanitizer=e}ngOnInit(){this.mediaForm=new c.cw({Image:new c.NI(null,c.kI.required)})}onFileChange(t){t.target.files&&t.target.files.length&&(this.fileHolder=t.target.files[0],this.mediaForm.controls.Image.setErrors(null))}goUpload(){this.store.dispatch(new a.fC(this.fileHolder)),this.afterUpload()}afterUpload(){this.mediaForm.setValue({Image:null}),this.mediaForm.markAsPristine(),this.mediaForm.markAsUntouched(),this.mediaForm.controls.Image.setErrors(null),this.fileHolder=null}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.yh),r.Y36(l.H7))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-media-input"]],decls:5,vars:2,consts:[["id","media-input"],[3,"formGroup","ngSubmit"],["placeholder","upload image","type","file","formControlName","Image",3,"change"],["type","submit",3,"disabled"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"form",1),r.NdJ("ngSubmit",function(){return e.goUpload()}),r.TgZ(2,"input",2),r.NdJ("change",function(t){return e.onFileChange(t)}),r.qZA(),r.TgZ(3,"button",3),r._uU(4,"upload"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("formGroup",e.mediaForm),r.xp6(2),r.Q6J("disabled",e.mediaForm.invalid))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u],styles:["#media-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], #media-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block}"]}),t})();var g=i(5143);let u=(()=>{class t{constructor(){}ngOnChanges(t){this.media&&(this.mediaasync=new Promise((t,e)=>{t(this.media)}))}copyURL(){alert(this.media.ImageURL)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-media-item"]],inputs:{media:"media"},features:[r.TTD],decls:8,vars:3,consts:[[1,"media-wrap"],[1,"media-img"],[3,"src"],[1,"btn-group"],["type","button",3,"click"]],template:function(t,e){if(1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div"),r.TgZ(2,"div",1),r._UZ(3,"img",2),r.ALo(4,"async"),r.qZA(),r.TgZ(5,"div",3),r.TgZ(6,"button",4),r.NdJ("click",function(){return e.copyURL()}),r._uU(7,"copy imgurl"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){let t;r.xp6(3),r.Q6J("src",null==(t=r.lcZ(4,1,e.mediaasync))?null:t.ImageURL,r.LSH)}},pipes:[n.Ov],styles:[".media-wrap[_ngcontent-%COMP%]{margin:5px 15px}.media-img[_ngcontent-%COMP%], .media-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center}.media-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100px}.btn-group[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:center}"]}),t})();function h(t,e){1&t&&r._UZ(0,"app-media-item",4),2&t&&r.Q6J("media",e.$implicit)}let f=(()=>{class t{constructor(t,e,i){this.store=t,this.router=e,this.pagingEvent=i,this.totalpage=1}ngOnDestroy(){this.store.dispatch(new a.oT),this.authSubs&&this.authSubs.unsubscribe(),this.mediaSubs&&this.mediaSubs.unsubscribe(),this.store.dispatch(new a.Lb),this.store.dispatch(new s.Lb)}ngOnInit(){this.authSubs=this.store.select("auth").subscribe(t=>{t.ID||this.router.navigateByUrl("/admin/login")}),this.mediaSubs=this.store.select("media").subscribe(t=>{let e=t.Medias,i=t.TotalPage;i&&(this.totalpage=i),e&&(this.mediasasync=new Promise((t,i)=>{t(e)}))}),this.store.dispatch(new a.OU(1))}onPageEvent(t){if(!(t==Number(this.totalpage)+1||t<=this.totalpage))return this.pagingEvent.emitMax(this.totalpage),void this.pagingEvent.emitCurPage(this.totalpage);this.store.dispatch(new a.OU(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.yh),r.Y36(d.F0),r.Y36(p.I))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-media"]],decls:6,vars:3,consts:[["id","wrapper"],["id","gridview"],[3,"media",4,"ngFor","ngForOf"],[3,"pageEvent"],[3,"media"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"app-media-input"),r.TgZ(2,"div",1),r.YNc(3,h,1,1,"app-media-item",2),r.ALo(4,"async"),r.qZA(),r.TgZ(5,"app-paginator",3),r.NdJ("pageEvent",function(t){return e.onPageEvent(t)}),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngForOf",r.lcZ(4,1,e.mediasasync)))},directives:[m,n.sg,g.J,u],pipes:[n.Ov],styles:["#wrapper[_ngcontent-%COMP%]{margin:0 auto;width:50%;border:1px solid #000}#gridview[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}@media only screen and (max-width:900px){#wrapper[_ngcontent-%COMP%]{width:100%}#gridview[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),t})();var b=i(3559);let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.ez,d.Bz.forChild([{path:"",component:f}]),c.UX,b.U]]}),t})()}}]);