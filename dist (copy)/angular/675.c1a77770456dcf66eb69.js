(self.webpackChunkangular=self.webpackChunkangular||[]).push([[675],{3675:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SearchModule:()=>b});var r=i(1116),n=i(9425),a=i(5425),s=i(1680),o=i(3559),c=i(5043),l=i(7368),p=i(1671),h=i(1934),g=i(1462),u=i(3070),d=i(9550),m=i(7244),f=i(7064);let v=(()=>{class t{constructor(t){this.route=t,this.searchEvent=new l.vpe}ngOnInit(){this.searchForm=new g.cw({Key:new g.NI(null,g.kI.required),Filter:new g.NI("Title")});let t=this.route.snapshot.queryParamMap.get("Key"),e=this.route.snapshot.queryParamMap.get("Filter");t&&e&&this.searchForm.setValue({Key:t,Filter:e})}goSearch(){this.searchEvent.emit({Key:this.searchForm.value.Key,Filter:this.searchForm.value.Filter})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.gz))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-search"]],outputs:{searchEvent:"searchEvent"},decls:16,vars:1,consts:[["id","search-bar"],["id","search-field"],[3,"formGroup","ngSubmit"],["id","wrapper"],["id","sinput"],["matInput","","type","text","placeholder","search articles here...","formControlName","Key"],["id","sfilter"],["value","title","formControlName","Filter"],["value","Title"],["value","Tag"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"form",2),l.NdJ("ngSubmit",function(){return e.goSearch()}),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"mat-form-field"),l._UZ(6,"input",5),l.qZA(),l.qZA(),l.TgZ(7,"div",6),l.TgZ(8,"mat-form-field"),l.TgZ(9,"mat-label"),l._uU(10,"filter by"),l.qZA(),l.TgZ(11,"mat-select",7),l.TgZ(12,"mat-option",8),l._uU(13,"title"),l.qZA(),l.TgZ(14,"mat-option",9),l._uU(15,"tag"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.Q6J("formGroup",e.searchForm))},directives:[g._Y,g.JL,g.sg,u.KE,d.Nt,g.Fj,g.JJ,g.u,u.hX,m.gD,f.ey],styles:["#search-bar[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:25px;padding-top:10px;padding-bottom:10px;display:flex;justify-content:center;background-color:wheat}#search-field[_ngcontent-%COMP%]{width:100%;padding:10px 10px 5px}#wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#sinput[_ngcontent-%COMP%]{width:80%;padding-right:10px}#sfilter[_ngcontent-%COMP%]{width:20%;padding-left:10px;justify-items:center}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();var y=i(5143),Z=i(7391);function w(t,e){if(1&t&&l._UZ(0,"app-article-item",5),2&t){const t=e.$implicit,i=l.oxw();l.Q6J("article",t)("from",i.from)}}let F=(()=>{class t{constructor(t,e,i,r){this.store=t,this.route=e,this.router=i,this.pagingEvent=r,this.from="Search",this.Page=1,this.totalpage=1}ngOnDestroy(){this.searchSubs&&this.searchSubs.unsubscribe(),this.store.dispatch(new c.g4)}ngOnInit(){this.searchSubs=this.store.select("search").subscribe(t=>{let e=t.Articles,i=t.TotalPage;i&&(this.totalpage=i),e&&(this.articles=new Promise((t,i)=>{t(e)}))}),this.route.queryParams.subscribe(t=>{let e=t.Key,i=t.Filter;e&&i&&(this.Key=e,this.Filter=i,this.findArticle(e,i,1))})}findArticle(t,e,i){console.log(t,e,i),this.store.dispatch(new c.F0({Page:i,Key:t,Filter:e}))}onSearchEvent(t){this.router.navigate(["/search"],{queryParams:{Key:t.Key,Filter:t.Filter}}),this.reset()}onPageEvent(t){if(!(t==Number(this.totalpage)+1||t<=this.totalpage))return this.pagingEvent.emitMax(this.totalpage),void this.pagingEvent.emitCurPage(this.totalpage);this.findArticle(this.Key,this.Filter,t)}reset(){this.store.dispatch(new c.g4),this.totalpage=1,this.pagingEvent.emitReset()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(p.yh),l.Y36(n.gz),l.Y36(n.F0),l.Y36(h.I))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-layout"]],decls:6,vars:3,consts:[[3,"searchEvent"],["id","container"],["id","grid-view"],[3,"article","from",4,"ngFor","ngForOf"],[3,"pageEvent"],[3,"article","from"]],template:function(t,e){1&t&&(l.TgZ(0,"app-search",0),l.NdJ("searchEvent",function(t){return e.onSearchEvent(t)}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.YNc(3,w,1,2,"app-article-item",3),l.ALo(4,"async"),l.qZA(),l.qZA(),l.TgZ(5,"app-paginator",4),l.NdJ("pageEvent",function(t){return e.onPageEvent(t)}),l.qZA()),2&t&&(l.xp6(3),l.Q6J("ngForOf",l.lcZ(4,1,e.articles)))},directives:[v,r.sg,y.J,Z.p],pipes:[r.Ov],styles:["#container[_ngcontent-%COMP%]{display:flex;justify-content:center}#grid-view[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr}@media only screen and (max-width:900px){#grid-view[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[r.ez,n.Bz.forChild([{path:"",component:F}]),a.m,s.l,o.U]]}),t})()}}]);